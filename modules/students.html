<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Students | Smart Hostel</title>
</head>

<body style="
  margin:0;
  font-family:'Segoe UI', Arial, sans-serif;
  background:#eef3f9;
  color:#222;
">

<!-- ================= HEADER ================= -->
<div style="
  background:#0d47a1;
  color:white;
  padding:16px 30px;
  display:flex;
  justify-content:space-between;
  align-items:center;
">
  <h3 style="margin:0;">Student Records</h3>
  <a href="javascript:history.back()" style="
    color:white;
    text-decoration:none;
    font-size:14px;
  ">
    ‚Üê Back
  </a>
</div>

<!-- ================= HERO ================= -->
<div style="
  max-width:1100px;
  margin:40px auto 20px;
  padding:0 20px;
">
  <div style="
    background:linear-gradient(135deg,#1976d2,#42a5f5);
    color:white;
    padding:32px;
    border-radius:20px;
    box-shadow:0 18px 40px rgba(0,0,0,0.15);
  ">
    <h1 style="margin:0;">Registered Students</h1>
    <p style="margin-top:10px;opacity:0.95;">
      View all students registered in the hostel system
    </p>
  </div>
</div>

<!-- ================= STUDENT LIST ================= -->
<div style="
  max-width:1100px;
  margin:30px auto 60px;
  padding:0 20px;
">

  <div style="
    background:white;
    padding:30px;
    border-radius:18px;
    box-shadow:0 12px 30px rgba(0,0,0,0.08);
  ">

    <table style="
      width:100%;
      border-collapse:collapse;
    ">
      <thead>
        <tr style="background:#e3f2fd;">
          <th style="padding:12px;text-align:left;">Name</th>
          <th style="padding:12px;text-align:left;">Email</th>
          <th style="padding:12px;text-align:left;">Role</th>
        </tr>
      </thead>
      <tbody id="studentTable">
        <tr>
          <td colspan="3" style="padding:15px;color:#777;">
            Loading students...
          </td>
        </tr>
      </tbody>
    </table>

  </div>

</div>

<!-- ================= FOOTER ================= -->
<div style="
  background:#0d47a1;
  color:white;
  text-align:center;
  padding:15px;
  font-size:14px;
">
  Smart Hostel Management System
</div>

<!-- ================= FIREBASE LOGIC ================= -->
<script type="module">
import { db } from "../src/config.js";
import {
  collection,
  getDocs
} from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

const tableBody = document.getElementById("studentTable");
tableBody.innerHTML = "";

const snapshot = await getDocs(collection(db, "users"));

snapshot.forEach(doc => {
  const user = doc.data();

  // Show only students
  if (user.role === "student") {
    const row = document.createElement("tr");

    row.innerHTML = `
      <td style="padding:12px;border-bottom:1px solid #eee;">
        ${user.name}
      </td>
      <td style="padding:12px;border-bottom:1px solid #eee;">
        ${user.email}
      </td>
      <td style="padding:12px;border-bottom:1px solid #eee;">
        Student
      </td>
    `;

    tableBody.appendChild(row);
  }
});

if (tableBody.innerHTML === "") {
  tableBody.innerHTML = `
    <tr>
      <td colspan="3" style="padding:15px;color:#777;">
        No students found
      </td>
    </tr>
  `;
}
</script>

</body>
</html>
